<html>
<body>
<div id="vol"></div>
<button id="button-up">+</button>
<button id="button-down">-</button>
<script>
const device = "192.168.0.43";
const port = 9966;
let vol = 0;

function showVol() {
    const req = new XMLHttpRequest();
    req.responseType = "json";
    req.open("GET", "http://" + device + ":" + port, true);
    req.onload  = function() {
       var jsonResponse = req.response;
       vol = jsonResponse.volume;
       document.getElementById("vol").innerHTML = vol; 
    };
    req.send();
}

function changeVol(delta) {
    const req = new XMLHttpRequest();
    req.responseType = "json";    
    req.open("PUT", "http://" + device + ":" + port, true);
    req.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    req.onload  = function() {
       const jsonResponse = req.response;
       vol = jsonResponse.volume;
       document.getElementById("vol").innerHTML = vol; 
    };
    req.send(JSON.stringify({volume: vol + delta}));
}

document.getElementById("button-up").setAttribute("onclick", "changeVol(1);");
document.getElementById("button-down").setAttribute("onclick", "changeVol(-1);");

showVol();

</script>
</body>
<html>
